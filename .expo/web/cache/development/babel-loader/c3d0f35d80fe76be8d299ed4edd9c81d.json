{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\HUSLIANA\\\\react_native_storeapp-master\\\\screens\\\\shop\\\\ProductsOverviewScreen.js\";\nimport React, { useState, useEffect, useCallback } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { HeaderButtons, Item } from 'react-navigation-header-buttons';\nimport HeaderButton from \"../../components/UI/HeaderButton\";\nimport ProductItem from \"../../components/shop/ProductItem\";\nimport * as cartActions from \"../../store/actions/cart\";\nimport * as productsActions from \"../../store/actions/products\";\nimport Colors from \"../../constants/Colors\";\nvar ProductsOverviewScreen = function ProductsOverviewScreen(props) {\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoading = _useState2[0],\n    setIsLoading = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isRefreshing = _useState4[0],\n    setIsRefreshing = _useState4[1];\n  var _useState5 = useState(),\n    _useState6 = _slicedToArray(_useState5, 2),\n    error = _useState6[0],\n    setError = _useState6[1];\n  var products = useSelector(function (state) {\n    return state.products.availableProducts;\n  });\n  var dispatch = useDispatch();\n  var loadProducts = useCallback(function _callee() {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setError(null);\n            setIsRefreshing(true);\n            _context.prev = 2;\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(dispatch(productsActions.fetchProducts()));\n          case 5:\n            _context.next = 10;\n            break;\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](2);\n            setError(_context.t0.message);\n          case 10:\n            setIsRefreshing(false);\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[2, 7]], Promise);\n  }, [dispatch, setIsLoading, setError]);\n  useEffect(function () {\n    var unsubscribe = props.navigation.addListener('focus', loadProducts);\n    return function () {\n      unsubscribe();\n    };\n  }, [loadProducts]);\n  useEffect(function () {\n    setIsLoading(true);\n    loadProducts().then(function () {\n      setIsLoading(false);\n    });\n  }, [dispatch, loadProducts]);\n  var selectItemHandler = function selectItemHandler(id, title) {\n    props.navigation.navigate('ProductDetail', {\n      productId: id,\n      productTitle: title\n    });\n  };\n  if (error) {\n    return React.createElement(View, {\n      style: styles.centered,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 7\n      }\n    }, React.createElement(Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }\n    }, \"An error occurred!\"), React.createElement(Button, {\n      title: \"Try again\",\n      onPress: loadProducts,\n      color: Colors.primary,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }\n    }));\n  }\n  if (isLoading) {\n    return React.createElement(View, {\n      style: styles.centered,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }\n    }, React.createElement(ActivityIndicator, {\n      size: \"large\",\n      color: Colors.primary,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }\n    }));\n  }\n  if (!isLoading && products.length === 0) {\n    return React.createElement(View, {\n      style: styles.centered,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 7\n      }\n    }, React.createElement(Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }, \"No products found. Maybe start adding some!\"));\n  }\n  return React.createElement(FlatList, {\n    onRefresh: loadProducts,\n    refreshing: isRefreshing,\n    data: products,\n    keyExtractor: function keyExtractor(item) {\n      return item.id;\n    },\n    renderItem: function renderItem(itemData) {\n      return React.createElement(ProductItem, {\n        image: itemData.item.imageUrl,\n        title: itemData.item.title,\n        price: itemData.item.price,\n        onSelect: function onSelect() {\n          selectItemHandler(itemData.item.id, itemData.item.title);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 9\n        }\n      }, React.createElement(Button, {\n        color: Colors.primary,\n        title: \"View Details\",\n        onPress: function onPress() {\n          selectItemHandler(itemData.item.id, itemData.item.title);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }\n      }), React.createElement(Button, {\n        color: Colors.primary,\n        title: \"To Cart\",\n        onPress: function onPress() {\n          dispatch(cartActions.addToCart(itemData.item));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }\n      }));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }\n  });\n};\nexport var screenOptions = function screenOptions(navData) {\n  return {\n    headerTitle: 'All Products',\n    headerLeft: function headerLeft() {\n      return React.createElement(HeaderButtons, {\n        HeaderButtonComponent: HeaderButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 7\n        }\n      }, React.createElement(Item, {\n        title: \"Menu\",\n        iconName: Platform.OS === 'android' ? 'md-menu' : 'ios-menu',\n        onPress: function onPress() {\n          navData.navigation.toggleDrawer();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 9\n        }\n      }));\n    },\n    headerRight: function headerRight() {\n      return React.createElement(HeaderButtons, {\n        HeaderButtonComponent: HeaderButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 7\n        }\n      }, React.createElement(Item, {\n        title: \"Cart\",\n        iconName: Platform.OS === 'android' ? 'md-cart' : 'ios-cart',\n        onPress: function onPress() {\n          navData.navigation.navigate('Cart');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 9\n        }\n      }));\n    }\n  };\n};\nvar styles = StyleSheet.create({\n  centered: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  }\n});\nexport default ProductsOverviewScreen;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useSelector","useDispatch","HeaderButtons","Item","HeaderButton","ProductItem","cartActions","productsActions","Colors","ProductsOverviewScreen","props","isLoading","setIsLoading","isRefreshing","setIsRefreshing","error","setError","products","state","availableProducts","dispatch","loadProducts","fetchProducts","message","unsubscribe","navigation","addListener","then","selectItemHandler","id","title","navigate","productId","productTitle","styles","centered","primary","length","item","itemData","imageUrl","price","addToCart","screenOptions","navData","headerTitle","headerLeft","Platform","OS","toggleDrawer","headerRight","StyleSheet","create","flex","justifyContent","alignItems"],"sources":["C:/Users/HUSLIANA/react_native_storeapp-master/screens/shop/ProductsOverviewScreen.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  FlatList,\n  Button,\n  Platform,\n  ActivityIndicator,\n  StyleSheet\n} from 'react-native';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { HeaderButtons, Item } from 'react-navigation-header-buttons';\n\nimport HeaderButton from '../../components/UI/HeaderButton';\nimport ProductItem from '../../components/shop/ProductItem';\nimport * as cartActions from '../../store/actions/cart';\nimport * as productsActions from '../../store/actions/products';\nimport Colors from '../../constants/Colors';\n\nconst ProductsOverviewScreen = props => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  const [error, setError] = useState();\n  const products = useSelector(state => state.products.availableProducts);\n  const dispatch = useDispatch();\n\n  const loadProducts = useCallback(async () => {\n    setError(null);\n    setIsRefreshing(true);\n    try {\n      await dispatch(productsActions.fetchProducts());\n    } catch (err) {\n      setError(err.message);\n    }\n    setIsRefreshing(false);\n  }, [dispatch, setIsLoading, setError]);\n\n  useEffect(() => {\n    const unsubscribe = props.navigation.addListener('focus', loadProducts);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [loadProducts]);\n\n  useEffect(() => {\n    setIsLoading(true);\n    loadProducts().then(() => {\n      setIsLoading(false);\n    });\n  }, [dispatch, loadProducts]);\n\n  const selectItemHandler = (id, title) => {\n    props.navigation.navigate('ProductDetail', {\n      productId: id,\n      productTitle: title\n    });\n  };\n\n  if (error) {\n    return (\n      <View style={styles.centered}>\n        <Text>An error occurred!</Text>\n        <Button\n          title=\"Try again\"\n          onPress={loadProducts}\n          color={Colors.primary}\n        />\n      </View>\n    );\n  }\n\n  if (isLoading) {\n    return (\n      <View style={styles.centered}>\n        <ActivityIndicator size=\"large\" color={Colors.primary} />\n      </View>\n    );\n  }\n\n  if (!isLoading && products.length === 0) {\n    return (\n      <View style={styles.centered}>\n        <Text>No products found. Maybe start adding some!</Text>\n      </View>\n    );\n  }\n\n  return (\n    <FlatList\n      onRefresh={loadProducts}\n      refreshing={isRefreshing}\n      data={products}\n      keyExtractor={item => item.id}\n      renderItem={itemData => (\n        <ProductItem\n          image={itemData.item.imageUrl}\n          title={itemData.item.title}\n          price={itemData.item.price}\n          onSelect={() => {\n            selectItemHandler(itemData.item.id, itemData.item.title);\n          }}\n        >\n          <Button\n            color={Colors.primary}\n            title=\"View Details\"\n            onPress={() => {\n              selectItemHandler(itemData.item.id, itemData.item.title);\n            }}\n          />\n          <Button\n            color={Colors.primary}\n            title=\"To Cart\"\n            onPress={() => {\n              dispatch(cartActions.addToCart(itemData.item));\n            }}\n          />\n        </ProductItem>\n      )}\n    />\n  );\n};\n\nexport const screenOptions = navData => {\n  return {\n    headerTitle: 'All Products',\n    headerLeft: () => (\n      <HeaderButtons HeaderButtonComponent={HeaderButton}>\n        <Item\n          title=\"Menu\"\n          iconName={Platform.OS === 'android' ? 'md-menu' : 'ios-menu'}\n          onPress={() => {\n            navData.navigation.toggleDrawer();\n          }}\n        />\n      </HeaderButtons>\n    ),\n    headerRight: () => (\n      <HeaderButtons HeaderButtonComponent={HeaderButton}>\n        <Item\n          title=\"Cart\"\n          iconName={Platform.OS === 'android' ? 'md-cart' : 'ios-cart'}\n          onPress={() => {\n            navData.navigation.navigate('Cart');\n          }}\n        />\n      </HeaderButtons>\n    )\n  };\n};\n\nconst styles = StyleSheet.create({\n  centered: { flex: 1, justifyContent: 'center', alignItems: 'center' }\n});\n\nexport default ProductsOverviewScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}